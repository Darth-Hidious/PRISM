#!/usr/bin/env python3
"""
PRISM Platform Executable Entry Point

This is the main executable entry point for the PRISM platform CLI.
It can be run directly without installation.

Usage:
    ./prism [COMMAND] [OPTIONS]
    python prism [COMMAND] [OPTIONS]

Available Commands:
    (no command)        Start the interactive agent REPL
    run GOAL            Run the agent autonomously on a research goal
    serve               Start PRISM as an MCP server
    search              Structured OPTIMADE search
    ask                 Natural-language materials query
    setup               Configure workflow preferences
    update              Check for PRISM updates
    configure           Manage API keys and settings
    switch-llm          Switch between LLM providers
    data                Data import and export commands
    predict             Run ML predictions
    model               Manage trained ML models
    sim                 Atomistic simulation (pyiron)
    calphad             CALPHAD thermodynamic tools
    plugin              Manage plugins
    mcp                 Manage MCP server connections
    optimade            OPTIMADE network commands
    advanced            Database management and configuration

Examples:
    ./prism                                   # interactive REPL
    ./prism run "Find stable Ti-Al alloys"    # autonomous agent
    ./prism search --elements Fe,Ni           # structured search
    ./prism ask "Battery cathode materials"   # natural-language query
    ./prism update                            # check for updates
"""

import sys
import os
from pathlib import Path

# Add the project root to Python path to ensure imports work
project_root = Path(__file__).parent.absolute()
sys.path.insert(0, str(project_root))

def main():
    """Main entry point for the PRISM CLI"""
    try:
        # Import the CLI module
        from app.cli import cli
        
        # Run the CLI
        cli()
        
    except ImportError as e:
        print(f"Import Error: {e}")
        print("\nPlease install PRISM and its dependencies:")
        print("   pip install -e .")
        sys.exit(1)
        
    except KeyboardInterrupt:
        print("\n\nüëã PRISM CLI interrupted by user")
        sys.exit(0)
        
    except Exception as e:
        print(f"‚ùå Unexpected error: {e}")
        print("\nüêõ If this error persists, please report it at:")
        print("   https://github.com/Darth-Hidious/PRISM/issues")
        sys.exit(1)

if __name__ == "__main__":
    main()
